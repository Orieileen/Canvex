# =========================
# Provider 凭证（必填）
# =========================

# 聊天链路凭证：用于 AI 聊天/SSE（backend/studio/graphs.py）
# 若聊天与媒体走同一个服务商，可与 MEDIA_OPENAI_API_KEY 填相同值。
OPENAI_API_KEY=

# 聊天链路网关：聊天请求的 Base URL。
# 直连 OpenAI 官方可留空；使用兼容网关时填完整地址（例如 https://xxx/v1）。
OPENAI_BASE_URL=

# 媒体链路凭证：用于生图/改图/视频（backend/studio/tools.py）。
# 若与聊天共用同一服务商/账号，可直接复用 OPENAI_API_KEY。
MEDIA_OPENAI_API_KEY=

# 媒体链路网关：媒体请求的 Base URL。
# 与聊天同网关可填写与 OPENAI_BASE_URL 相同值。
# 留空时会先回落到 OPENAI_BASE_URL；若仍为空则直连 OpenAI 官方。
MEDIA_OPENAI_BASE_URL=

# =========================
# Chat / Media 模型
# =========================
EXCALIDRAW_CHAT_MODEL=gpt-4o-mini
EXCALIDRAW_CHAT_TEMPERATURE=0.4

MEDIA_OPENAI_TIMEOUT=600
MEDIA_OPENAI_SCRIPT_MODEL=gpt-5-mini
MEDIA_OPENAI_IMAGE_MODEL=gemini-2.5-flash-image
MEDIA_OPENAI_IMAGE_EDIT_MODEL=gemini-2.5-flash-image
# gpt-image-* 的编辑链路将使用 Responses API + image_generation(action=edit)。
MEDIA_OPENAI_RESPONSES_MODEL=gpt-4.1-mini
MEDIA_OPENAI_IMAGE_EDIT_INPUT_FIDELITY=high
# 若编辑模型不支持 /images/edits，将自动回退到该模型重试（默认 dall-e-2）。
MEDIA_OPENAI_IMAGE_EDIT_FALLBACK_MODEL=dall-e-2
MEDIA_OPENAI_VIDEO_MODEL=sora-2
MEDIA_OPENAI_VIDEO_REQUIRE_REFERENCE=false
MEDIA_OPENAI_VIDEO_SECONDS_ALLOWED=10,15,25
MEDIA_OPENAI_VIDEO_SECONDS_DEFAULT=15
MEDIA_OPENAI_VIDEO_TIMEOUT_SECONDS=1800
MEDIA_OPENAI_VIDEO_POLL_MAX_ATTEMPTS=360
MEDIA_OPENAI_VIDEO_POLL_INTERVAL=5

# =========================
# Frontend
# =========================
VITE_API_URL=http://localhost:28000
VITE_CANVEX_ASSET_PATH=/canvex-assets/
VITE_VIDEO_POLL_MAX_ATTEMPTS=600
VITE_VIDEO_POLL_INTERVAL_MS=3000
VITE_WORKSPACE_KEY=public
WORKSPACE_ID=public

# =========================
# 基础运行
# =========================
DJANGO_SECRET_KEY=change-me-please
DJANGO_DEBUG=true
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,backend
CORS_ALLOW_ALL_ORIGINS=true

BACKEND_PORT=28000
FRONTEND_PORT=5173

REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_TASK_ALWAYS_EAGER=false

PUBLIC_BASE_URL=http://localhost:28000
PUBLIC_MEDIA_BASE=http://localhost:28000
INTERNAL_MEDIA_BASE=http://backend:8000
